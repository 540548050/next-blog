{"version":3,"file":"4.6e0eda0963a3eea698cd.hot-update.js","sources":["webpack:///config/index.js","webpack:///pages/Admin/index.js","webpack:///store/action-types.js","webpack:///store/actions.js"],"sourcesContent":["import {getDomain} from \"./env\";\r\nimport {toQueryStr} from '../until';\r\n\r\n//前台\r\nexport const getBlogUrl = (obj) => {\r\n  return getDomain() + 'api/getBlog' + toQueryStr(obj);\r\n}\r\nexport const getDetailUrl = (obj) => {\r\n  return getDomain() + 'api/detail' + toQueryStr(obj);\r\n}\r\nexport const getTotalUrl = (obj) => {\r\n  return getDomain() + 'api/total' + toQueryStr(obj);\r\n}\r\n\r\n\r\nexport const getCommentsUrl = (obj) => {\r\n  return getDomain() + 'api/comments' + toQueryStr(obj);\r\n}\r\nexport const postCommentUrl = () => {\r\n  return getDomain() + 'api/postComment';\r\n}\r\n\r\n//后台\r\nexport const getAdminBlogUrl = () => {\r\n  return getDomain() + 'api/getAdminBlog';\r\n}\r\n\r\n// export const getBlogUrl = domain+'/api/getBlog'\r\n// export const getTotalUrl = domain+'/api/total'\r\n// export const getLifeUrl = domain+'/api/life'\r\n// export const getDetailUrl = domain+'/api/detail'\r\n// export const getLastIdUrl = domain+'/api/lastId'\r\n// export const getNextIdUrl = domain+'/api/nextId'\r\n// export const getCommentsUrl = domain+'/api/comments'\r\n// export const postArticleUrl = domain+'/api/postArticle'\r\n// export const postCommentUrl = domain+'/api/postComment'\r\n\r\n\r\n// export const getAdminBlogUrl = domain + '/api/getAdminBlog'\r\n// export const getAdminCommentsUrl = domain + '/api/getAdminComments'\r\n// export const postAdminDetailUrl = domain + '/api/postAdminDetail'\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// config/index.js","import React,{Component} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport Head from 'next/head'\r\n\r\n\r\nimport {Layout, Menu, Breadcrumb, Row, Col, Pagination, Input,Tabs,Table,List, Avatar, Icon} from 'antd';\r\n\r\nimport Header from '../../components/Header';\r\nimport {formatTime} from '../../until';\r\nimport {getAdminBlogUrl} from '../../config';\r\nimport {getAdminBlogList} from '../../store/actions';\r\n\r\n\r\nconst TabPane = Tabs.TabPane;\r\nconst {Content} = Layout;\r\nconst Search = Input.Search;\r\nclass Admin extends Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      pageNum: 10,\r\n      currentPage: 1,\r\n      inputVal: ''\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    console.log(this.props)\r\n    const queryStringObj = {\r\n      \r\n    }\r\n    //getAdminBlogList(dispatch, getAdminBlogUrl(queryStringObj))\r\n  }\r\n\r\n  itemRender(current, type, originalElement) {\r\n    if (type === 'prev') {\r\n      return <a>Previous</a>;\r\n    } else if (type === 'next') {\r\n      return <a>Next</a>;\r\n    }\r\n    return originalElement;\r\n  }\r\n\r\n  onChange(page, pageSize) {\r\n\r\n  }\r\n\r\n  onSearch(val) {\r\n    this.setState({\r\n      inputVal: val,\r\n      currentPage: 1\r\n    })\r\n  }\r\n  handleDelComment(id){\r\n  }\r\n  handleDelArticle(id){\r\n\r\n  }\r\n  render () {\r\n\r\n    function onChange(pagination, filters, sorter) {\r\n      console.log('params', pagination, filters, sorter);\r\n    }\r\n\r\n    function onClick(pagination, filters, sorter) {\r\n      console.log('onClick', pagination, filters, sorter);\r\n    }\r\n\r\n    function callback(key) {\r\n      console.log(key);\r\n    }\r\n\r\n    const keys = [].map(v => ([...Object.keys(v),'操作']));\r\n    const columns = keys && keys[0] ? keys[0].map(v => (\r\n      v === 'title' ?\r\n        {\r\n          title: v, dataIndex: v, render: (text, row, index) =>\r\n          <Link to={`/AdminDetail/${row.id}`}>{text}</Link>\r\n        } :\r\n        v==='操作'?\r\n          {\r\n            title: v, dataIndex: v, render: (text, row, index) =>\r\n            <a href=\"javascript:;\" onClick={this.handleDelArticle.bind(this,row.id)} >删除</a>\r\n          }:\r\n          {title: v, dataIndex: v}\r\n    )) : [];\r\n    const data = [].map((v, i) => Object.assign({}, v, {key: i}, {createTime: formatTime(v.createTime)}))\r\n    return (\r\n      <div>\r\n        <Head>\r\n          <meta name='viewport' content='width=device-width, initial-scale=1' />\r\n          <meta charSet='utf-8' />\r\n          <link rel='stylesheet' href='/_next/static/style.css' />\r\n          <title>admin</title>\r\n        </Head>\r\n        <Header/>\r\n        <Layout>\r\n          <Content style={{padding: '0 50px'}}>\r\n            <Search placeholder=\"input search text\" onSearch={this.onSearch.bind(this)} enterButton=\"Search\"\r\n                    size=\"large\"/>\r\n            <div style={{background: '#fff', padding: 24, minHeight: 380}}>\r\n              <Tabs defaultActiveKey=\"1\" onChange={callback}>\r\n                <TabPane tab=\"文章管理\" key=\"1\">\r\n                  <Table\r\n                    bordered={true}\r\n                    columns={columns}\r\n                    dataSource={data}\r\n                    pagination={false}\r\n                    onChange={onChange}\r\n                    onRow={(record) => {\r\n                      return {\r\n                        onClick: () => {\r\n                          console.log(record)\r\n                        },       // 点击行\r\n                        onMouseEnter: () => {\r\n                        },  // 鼠标移入行\r\n                      };\r\n                    }}\r\n                  />\r\n                  <Pagination\r\n\r\n                    defaultCurrent={this.state.currentPage}\r\n                    total={100} itemRender={this.itemRender.bind(this)} onChange={this.onChange.bind(this)}/>\r\n                </TabPane>\r\n                <TabPane tab=\"留言管理\" key=\"2\">\r\n\r\n                </TabPane>\r\n                <TabPane tab=\"浏览记录\" key=\"3\">Content of Tab Pane 3</TabPane>\r\n              </Tabs>\r\n            </div>\r\n          </Content>\r\n        </Layout>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Admin\n\n\n// WEBPACK FOOTER //\n// pages/Admin/index.js","export const actionTypes = {\r\n  //前台\r\n  SEARCH_DATA: 'SEARCH_DATA',\r\n  GET_SEARCH_TOTAL_DATA: 'GET_SEARCH_TOTAL_DATA',\r\n  SEARCH_PAGE_DATA: 'SEARCH_PAGE_DATA',\r\n\r\n  POST_COMMENTS: 'POST_COMMENTS',\r\n  //后台\r\n  GET_ADMIN_DATA:'GET_ADMIN_DATA'\r\n}\n\n\n// WEBPACK FOOTER //\n// store/action-types.js","import {actionTypes} from \"./action-types\";\r\nimport fetch from 'isomorphic-unfetch'\r\n\r\n//前台\r\nexport const getSearchPageList = async (dispatch, url) => {\r\n  //点击搜索分页搜索到的文章列表\r\n  const res = await fetch(url)\r\n  const jsonData = await res.json()\r\n  return dispatch({type: actionTypes.SEARCH_PAGE_DATA, searchData: jsonData})\r\n}\r\nexport const getSearchList = async (dispatch, url) => {\r\n  //第一次搜索到的文章列表\r\n  const res = await fetch(url)\r\n  const jsonData = await res.json()\r\n  return dispatch({type: actionTypes.SEARCH_DATA, searchData: jsonData})\r\n\r\n}\r\nexport const getSearchTotal = async (dispatch, url) => {\r\n  //搜索的所有页数\r\n  const res = await fetch(url)\r\n  const jsonData = await res.json()\r\n  return dispatch({type: actionTypes.GET_SEARCH_TOTAL_DATA, searchTotalData: jsonData})\r\n\r\n}\r\n//后台\r\n\r\nexport const getAdminBlogList = async (dispatch, url) => {\r\n  //点击搜索分页搜索到的文章列表\r\n  const res = await fetch(url)\r\n  const jsonData = await res.json()\r\n  return dispatch({type: actionTypes.GET_ADMIN_DATA, adminBlogData: jsonData})\r\n}\r\n\r\n\r\nexport const postComments = async (dispatch, url,body) => {\r\n  //发布评论,然后获得更新后的评论\r\n  const res = await fetch(url,{\r\n    method: 'POST',\r\n    body:JSON.stringify(body)\r\n  })\r\n  const jsonData = await res.json()\r\n  return dispatch({type: actionTypes.POST_COMMENTS, getCommentsData: jsonData})\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// store/actions.js"],"mappings":"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","sourceRoot":""}