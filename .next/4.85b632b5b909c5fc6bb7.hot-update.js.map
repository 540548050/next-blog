{"version":3,"file":"4.85b632b5b909c5fc6bb7.hot-update.js","sources":["webpack:///components/Comments/index.js"],"sourcesContent":["import Link from 'next/link';\nimport React,{Component} from 'react';\nimport {connect} from 'react-redux';\nimport {\n  Layout, Menu, Breadcrumb, Row, Col, BackTop, Card, Form,\n  Input, Tooltip, Cascader, Select, Checkbox, Button,\n  AutoComplete, List, Avatar, Icon, Divider\n} from 'antd';\nimport {formatTime} from \"../../until\";\nimport {postComments} from \"../../store/actions\";\nimport {postCommentUrl} from \"../../config\";\n\nconst FormItem = Form.Item;\nconst { TextArea } = Input;\nconst AutoCompleteOption = AutoComplete.Option;\nclass Comments extends Component {\n  constructor(props) {\n    super(props);\n    this.state={\n      autoCompleteResult:[1,2]\n    }\n  }\n  componentWillMount(){\n    console.log(this.props)\n  }\n  handleWebsiteChange = (value) => {\n    let autoCompleteResult;\n    if (!value) {\n      autoCompleteResult = [];\n    } else {\n      autoCompleteResult = ['.com', '.org', '.net'].map(domain => `${value}${domain}`);\n    }\n    this.setState({autoCompleteResult});\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const {dispatch} = this.props;\n    let {articleID:id} = this.state;\n    if(!id){\n      return;\n    }\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        const {comment,email,nickname,website} = values;\n        console.log('Received values of form: ', values);\n\n        console.log({id,comment,email,nickname,website})\n\n        let {articleID} = this.state;\n        const queryStringComment = {\n          id:articleID,\n          comment,\n          email,\n          nickname,\n          website\n        }\n        postComments(dispatch,postCommentUrl(),queryStringComment)\n      }\n    });\n  }\n  render(){\n    const {commentsData} = this.props\n    //表单\n    const {getFieldDecorator} = this.props.form;\n    const {autoCompleteResult} = this.state;\n\n    const formItemLayout = {\n      labelCol: {\n        xs: {span: 24},\n        sm: {span: 8},\n      },\n      wrapperCol: {\n        xs: {span: 24},\n        sm: {span: 16},\n      },\n    };\n    const tailFormItemLayout = {\n      wrapperCol: {\n        xs: {\n          span: 24,\n          offset: 0,\n        },\n        sm: {\n          span: 16,\n          offset: 8,\n        },\n      },\n    };\n\n    const websiteOptions = autoCompleteResult.map(website => (\n      <AutoCompleteOption key={website}>{website}</AutoCompleteOption>\n    ));\n    return (\n      <div className=\"comment-wrapper\">\n        <h2>发表评论：</h2>\n        <Row>\n          <Col span={8}>\n            <Form onSubmit={this.handleSubmit}>\n              <FormItem\n                {...formItemLayout}\n                label={(\n                  <span>\n              Nickname&nbsp;\n                    <Tooltip title=\"What do you want others to call you?\">\n                <Icon type=\"question-circle-o\" />\n              </Tooltip>\n            </span>\n                )}\n              >\n                {getFieldDecorator('nickname', {\n                  rules: [{ required: true, message: 'Please input your nickname!', whitespace: true }],\n                })(\n                  <Input />\n                )}\n              </FormItem>\n              <FormItem\n                {...formItemLayout}\n                label=\"E-mail\"\n              >\n                {getFieldDecorator('email', {\n                  rules: [{\n                    type: 'email', message: 'The input is not valid E-mail!',\n                  }, {\n                    required: false, message: 'Please input your E-mail!',\n                  }],\n                })(\n                  <Input/>\n                )}\n              </FormItem>\n              <FormItem\n                {...formItemLayout}\n                label=\"Website\"\n              >\n                {getFieldDecorator('website', {\n                  rules: [{required: false, message: 'Please input website!'}],\n                })(\n                  <AutoComplete\n                    dataSource={websiteOptions}\n                    onChange={this.handleWebsiteChange}\n                    placeholder=\"website\"\n                  >\n                    <Input/>\n                  </AutoComplete>\n                )}\n              </FormItem>\n              <FormItem\n                {...formItemLayout}\n                label=\"comment\"\n              >\n                {getFieldDecorator('comment', {\n                  rules: [ {\n                    required: true, message: 'Please input your E-mail!',\n                  }],\n                })(\n                  <TextArea/>\n                )}\n              </FormItem>\n              <FormItem {...tailFormItemLayout}>\n                <Button type=\"primary\" htmlType=\"submit\">提交评论</Button>\n              </FormItem>\n            </Form>\n          </Col>\n        </Row>\n        {\n          commentsData.map((v, i) =>\n            (\n              <Card\n                bodyStyle={{background: \"#f8f8f8\"}}\n                key={i} title={\n                <span>\n                       <span style={{color: '#34538b', fontWeight: 'bold'}}>{v.user}</span>\n                        说道：\n                    </span>\n              }\n                extra={<a href=\"javascript:;\">{formatTime(v.createTime)}</a>}>\n                <p>{v.msg}</p>\n              </Card>\n            )\n          )\n        }\n      </div>\n    )\n  }\n}\nconst WrappedRegistrationForm = Form.create()(Comments);\nexport default connect()(WrappedRegistrationForm);\n\n\n// WEBPACK FOOTER //\n// components/Comments/index.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAMA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA;AADA;AAAA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;AAOA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AA3CA;AAEA;AACA;AADA;AAFA;AAKA;AACA;;;AAAA;AACA;AACA;;;AAoCA;AAAA;AACA;AADA;AAAA;AAMA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAIA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AALA;AAUA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AALA;AADA;AAaA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AANA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AADA;AAGA;AAAA;AAAA;AAAA;AAAA;AAKA;AAFA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAAA;AADA;AAGA;AAAA;AADA;AAHA;AAOA;AAAA;AAAA;AAAA;AAAA;AAKA;AAFA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AADA;AAIA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAMA;AAFA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAAA;AADA;AADA;AAKA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAGA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AARA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAXA;AAkBA;;;;AAvKA;AACA;AAwKA;AACA;AAAA;;;;A","sourceRoot":""}