{"version":3,"file":"5.0b90ebe63b6204b201eb.hot-update.js","sources":["webpack:///components/EditArticle/index.js","webpack:///config/constantsData.js","webpack:///config/env.js","webpack:///store/actions.js"],"sourcesContent":["import React, {Component} from 'react'\r\nimport {Layout, Menu, Breadcrumb, Row, Col,List, Avatar, Icon, Pagination, Alert, Input, Button, Select,message} from 'antd'\r\nimport {connect} from 'react-redux'\r\n\r\nimport Edit from '../../components/Edit';\r\n\r\nimport {postArticleUrl} from '../../config';\r\nimport {postArticle} from '../../store/actions';\r\n\r\nconst {TextArea} = Input;\r\nconst Option = Select.Option;\r\n\r\nclass EditArticle extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      selectVal: '',\r\n      titleVal: '',\r\n      shortVal: '',\r\n      urlVal: '',\r\n      editCont: '',\r\n      isEdit:'' //空值默认不为修改文章\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    const {dataSource = {}} = this.props;\r\n    const {title, short, type, url, content,articleID=''} = dataSource;\r\n\r\n    this.setState({\r\n      selectVal: type,\r\n      titleVal: title,\r\n      shortVal: short,\r\n      urlVal: url,\r\n      editCont: content,\r\n      isEdit:articleID\r\n    })\r\n  }\r\n\r\n  handleChangeSelect(value) {\r\n    this.setState({\r\n      selectVal: value\r\n    })\r\n  }\r\n\r\n  handleChangeTitle(e) {\r\n    this.setState({\r\n      titleVal: e.target.value\r\n    })\r\n  }\r\n\r\n  handleChangeUrl(e) {\r\n    this.setState({\r\n      urlVal: e.target.value\r\n    })\r\n  }\r\n\r\n  handleChangeShort(e) {\r\n    this.setState({\r\n      shortVal: e.target.value\r\n    })\r\n  }\r\n\r\n  //编辑器内容\r\n  handleChangeMarkEdit(txt) {\r\n    this.setState({\r\n      editCont: txt\r\n    })\r\n  }\r\n\r\n  onSubmit() {\r\n    const {dispatch} = this.props;\r\n    const {isEdit} = this.state;\r\n    const {\r\n      selectVal='',\r\n      titleVal='',\r\n      shortVal='',\r\n      urlVal='',\r\n      editCont='',\r\n      isEdit:id\r\n    } = this.state;\r\n    let queryParamsObj={\r\n      title: titleVal,\r\n      url: urlVal,\r\n      content: encodeURIComponent(editCont),\r\n      user: '刘伟波',\r\n      type: selectVal,\r\n      short: shortVal,\r\n      img: 'js.png'\r\n    };\r\n    if(isEdit!==''){\r\n      //修改文章 isEdit为文章id\r\n      queryParamsObj=Object.assign({},queryParamsObj,{id})\r\n    }\r\n    if(titleVal===''||selectVal===''||editCont===''){\r\n      message.error('必填项不能为空')\r\n      return ;\r\n    }\r\n\r\n    postArticle(dispatch, postArticleUrl(), queryParamsObj).then(res=>{\r\n      if(res){\r\n        message.success('发布文章成功')\r\n      }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      editCont='',\r\n      selectVal='',\r\n      titleVal='',\r\n      shortVal='',\r\n      urlVal=''\r\n    } = this.state;\r\n    const {dataSource = {}} = this.props;\r\n    const {createTime} = dataSource;\r\n    return (\r\n      <div>\r\n        <Row>\r\n          <Col span={20}>\r\n            <Input\r\n              defaultValue={titleVal} onChange={this.handleChangeTitle.bind(this)} placeholder=\"文章标题\"/>\r\n          </Col>\r\n          <Col span={1}>\r\n          </Col>\r\n          <Col span={3}>\r\n            <Select defaultValue={selectVal===''?'文章类型':selectVal} style={{width: '100%'}} onChange={this.handleChangeSelect.bind(this)}>\r\n              <Option value=\"h5\">html</Option>\r\n              <Option value=\"css\">css</Option>\r\n              <Option value=\"js\">javascript</Option>\r\n              <Option value=\"vue\">vue</Option>\r\n              <Option value=\"react\">react</Option>\r\n              <Option value=\"angular\">angular</Option>\r\n              <Option value=\"node\">node</Option>\r\n              <Option value=\"php\">php</Option>\r\n              <Option value=\"mysql\">mysql</Option>\r\n              <Option value=\"server\">服务器之类</Option>\r\n              <Option value=\"interesting\">生活喜好</Option>\r\n              <Option value=\"fight\">激励向上</Option>\r\n              <Option value=\"others\">其他</Option>\r\n            </Select>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24}>\r\n            <Input\r\n              defaultValue={urlVal} onChange={this.handleChangeUrl.bind(this)} placeholder=\"原文的URL链接地址\"/>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24}>\r\n                                    <TextArea\r\n                                      onChange={this.handleChangeShort.bind(this)}\r\n                                      placeholder='简短介绍'\r\n                                      defaultValue={shortVal}\r\n                                      rows={2}/>\r\n          </Col>\r\n        </Row>\r\n        <Edit editCont={editCont} createTime={createTime} handleChangeMarkEdit={this.handleChangeMarkEdit.bind(this)}/>\r\n        <Button type=\"primary\" onClick={this.onSubmit.bind(this)}>提交</Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect()(EditArticle)\r\n\n\n\n// WEBPACK FOOTER //\n// components/EditArticle/index.js","export const DEV_DOMAIN = 'http://localhost:7654';\r\n\r\n\r\nexport const pageNum = 10;//分页数\r\nexport const TITLE = 'title'\r\nexport const ALL = 'all'\r\n\r\n//导航路由\r\nexport const INDEX = '/'\r\nexport const INDEX_TXT = '网站首页'\r\nexport const BLOG = '/Blog'\r\nexport const BLOG_TXT = '文章列表'\r\nexport const ADMIN = '/Admin'\r\nexport const ADMIN_TXT = '后台管理'\r\nexport const LIFE = '/Life'\r\nexport const LIFE_TXT = '生活记录'\r\nexport const TEST = '/Test'\r\nexport const TEST_TXT = '测试'\r\nexport const POST_ARTICLE = '/PostArticle'\r\nexport const POST_ARTICLE_TXT = '发布文章'\r\n\r\n//seo\r\nexport const COMMON_TITLE = '>>刘伟波-天天向上'\r\nexport const INDEX_TITLE = '刘伟波的个人主页'\r\n\n\n\n// WEBPACK FOOTER //\n// config/constantsData.js","import {DEV_DOMAIN} from './constantsData';\r\n\r\nexport function getDomain () {\r\n  return DEV_DOMAIN+'/';\r\n}\n\n\n// WEBPACK FOOTER //\n// config/env.js","import {actionTypes} from \"./action-types\";\r\nimport fetch from 'isomorphic-unfetch'\r\n\r\n//前台\r\nexport const getSearchPageList = async (dispatch, url) => {\r\n  //点击搜索分页搜索到的文章列表\r\n  const res = await fetch(url)\r\n  const jsonData = await res.json()\r\n  return dispatch({type: actionTypes.SEARCH_PAGE_DATA, searchData: jsonData})\r\n}\r\nexport const getSearchList = async (dispatch, url) => {\r\n  //第一次搜索到的文章列表\r\n  const res = await fetch(url)\r\n  const jsonData = await res.json()\r\n  return dispatch({type: actionTypes.SEARCH_DATA, searchData: jsonData})\r\n\r\n}\r\nexport const getSearchTotal = async (dispatch, url) => {\r\n  //搜索的所有页数\r\n  const res = await fetch(url)\r\n  const jsonData = await res.json()\r\n  return dispatch({type: actionTypes.GET_SEARCH_TOTAL_DATA, searchTotalData: jsonData})\r\n\r\n}\r\nexport const getLifeList = async (dispatch, url) => {\r\n  //生活板块\r\n  const res = await fetch(url)\r\n  const jsonData = await res.json()\r\n  return dispatch({type: actionTypes.GET_LIFE, lifeData: jsonData})\r\n\r\n}\r\n\r\nexport const postComments = async (dispatch, url,body) => {\r\n  //发布评论,然后获得更新后的评论\r\n  const res = await fetch(url,{\r\n    method: 'POST',\r\n    body:JSON.stringify(body)\r\n  })\r\n  const jsonData = await res.json()\r\n  return dispatch({type: actionTypes.POST_COMMENTS, getCommentsData: jsonData})\r\n\r\n}\r\nexport const postArticle = async (dispatch, url,body) => {\r\n  //发布文章\r\n  const res = await fetch(url,{\r\n    method: 'POST',\r\n    body:JSON.stringify(body)\r\n  })\r\n  const jsonData = await res.json()\r\n  return dispatch({type: actionTypes.POST_ARTICLE, postArticleData: jsonData})\r\n\r\n}\r\n\r\n//后台\r\n\r\nexport const getAdminBlogList = async (dispatch, url) => {\r\n  //点击搜索分页搜索到的文章列表\r\n  const res = await fetch(url)\r\n  const jsonData = await res.json()\r\n  return dispatch({type: actionTypes.GET_ADMIN_DATA, adminBlogData: jsonData})\r\n}\r\n\r\nexport const postAdminDetail = async (dispatch, url) => {\r\n  //修改文章\r\n  const res = await fetch(url)\r\n  const jsonData = await res.json()\r\n  return dispatch({type: actionTypes.POST_ADMIN_DETAIL, postAdminDetailData: jsonData})\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// store/actions.js"],"mappings":"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","sourceRoot":""}