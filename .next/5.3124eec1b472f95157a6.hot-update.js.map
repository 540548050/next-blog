{"version":3,"file":"5.3124eec1b472f95157a6.hot-update.js","sources":["webpack:///components/ListTitle/index.js","webpack:///config/index.js","webpack:///./node_modules/_antd@3.6.5@antd/lib/pagination/index.js","webpack:///pages/Blog/index.js","webpack:///until/index.js"],"sourcesContent":["import React, {Component} from 'react'\r\nimport {Layout, Menu, Breadcrumb, Row, Col} from 'antd'\r\nimport {List, Avatar, Icon, Pagination, Alert, Input, Button, Radio, Tooltip} from 'antd'\r\nimport {connect} from 'react-redux'\r\nimport Link from 'next/link';\r\n\r\nimport {formatTime} from '../../until';\r\n\r\nconst IconText = ({type, text}) => (\r\n  <span>\r\n    <Icon type={type} style={{marginRight: 8}}/>\r\n    {text}\r\n  </span>\r\n)\r\nconst ListTitle = (data) => {\r\n  console.log(data)\r\n  return (\r\n    <div>123</div>\r\n  );\r\n}\r\nexport default ListTitle\r\n\n\n\n// WEBPACK FOOTER //\n// components/ListTitle/index.js","import {getDomain} from \"./env\";\r\nimport {toQueryStr} from '../until';\r\n\r\n//前台\r\nexport const getBlogUrl = (obj) => {\r\n  return getDomain() + 'api/getBlog' + toQueryStr(obj);\r\n}\r\nexport const getDetailUrl = (obj) => {\r\n  return getDomain() + 'api/detail' + toQueryStr(obj);\r\n}\r\nexport const getTotalUrl = (obj) => {\r\n  return getDomain() + 'api/total' + toQueryStr(obj);\r\n}\r\nexport const getLastIdUrl = (obj) => {\r\n  return getDomain() + 'api/lastId' + toQueryStr(obj);\r\n}\r\n\r\nexport const getNextIdUrl = (obj) => {\r\n  return getDomain() + 'api/nextId' + toQueryStr(obj);\r\n}\r\n\r\n\r\nexport const getCommentsUrl = (obj) => {\r\n  return getDomain() + 'api/comments' + toQueryStr(obj);\r\n}\r\nexport const postCommentUrl = () => {\r\n  return getDomain() + 'api/postComment';\r\n}\r\n\r\nexport const getLifeUrl = () => {\r\n  //生活板块\r\n  return getDomain() + 'api/life';\r\n}\r\n\r\n//后台\r\nexport const getAdminBlogUrl = (obj) => {\r\n  return getDomain() + 'api/getAdminBlog'+ toQueryStr(obj);;\r\n}\r\n\r\n// export const getBlogUrl = domain+'/api/getBlog'\r\n// export const getTotalUrl = domain+'/api/total'\r\n// export const getLifeUrl = domain+'/api/life'\r\n// export const getDetailUrl = domain+'/api/detail'\r\n// export const getLastIdUrl = domain+'/api/lastId'\r\n// export const getNextIdUrl = domain+'/api/nextId'\r\n// export const getCommentsUrl = domain+'/api/comments'\r\n// export const postArticleUrl = domain+'/api/postArticle'\r\n// export const postCommentUrl = domain+'/api/postComment'\r\n\r\n\r\n// export const getAdminBlogUrl = domain + '/api/getAdminBlog'\r\n// export const getAdminCommentsUrl = domain + '/api/getAdminComments'\r\n// export const postAdminDetailUrl = domain + '/api/postAdminDetail'\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// config/index.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Pagination = require('./Pagination');\n\nvar _Pagination2 = _interopRequireDefault(_Pagination);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nexports['default'] = _Pagination2['default'];\nmodule.exports = exports['default'];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_antd@3.6.5@antd/lib/pagination/index.js\n// module id = ./node_modules/_antd@3.6.5@antd/lib/pagination/index.js\n// module chunks = 5","import React, {Component} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {\r\n  Layout, Menu, Breadcrumb, Row, Col,\r\n  List, Avatar, Icon, Pagination, Alert,\r\n  Input, Button, Radio, Tooltip, Spin\r\n} from 'antd'\r\n\r\nimport 'whatwg-fetch'\r\nimport Link from 'next/link';\r\nimport Head from 'next/head'\r\n\r\nimport {getSearchList, getSearchTotal, getSearchPageList} from '../../store/actions'\r\nimport Header from '../../components/Header';\r\nimport ListTitle from '../../components/ListTitle';\r\nimport Footer from '../../components/Footer';\r\nimport {getBlogUrl, getTotalUrl} from '../../config';\r\nimport {pageNum, TITLE, ALL,COMMON_TITLE,INDEX_TITLE} from '../../config/constantsData';\r\n\r\nconst {Content} = Layout;\r\nconst Search = Input.Search;\r\n\r\n\r\nclass Blog extends Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      currentPage: 1,\r\n      keyWard: ''\r\n    }\r\n  }\r\n\r\n  onSearch(val) {\r\n    const {dispatch} = this.props;\r\n    let queryStringObj, queryTotalString;\r\n    this.setState({\r\n      keyWard: val\r\n    })\r\n    if (val) {\r\n      queryStringObj = {\r\n        type: TITLE,\r\n        num: 1,\r\n        pageNum,\r\n        wd: val\r\n      }\r\n      queryTotalString = {\r\n        type: TITLE,\r\n        wd: val\r\n      };\r\n    } else {\r\n      queryStringObj = {\r\n        type: ALL,\r\n        num: 1,\r\n        pageNum\r\n      }\r\n      queryTotalString = {\r\n        type: ALL\r\n      };\r\n    }\r\n\r\n    getSearchList(dispatch, getBlogUrl(queryStringObj))\r\n    getSearchTotal(dispatch, getTotalUrl(queryTotalString))\r\n  }\r\n\r\n  onChange(page, pageSize) {\r\n    const {dispatch} = this.props\r\n    const {keyWard: wd} = this.state\r\n    this.setState({\r\n      currentPage: page\r\n    })\r\n\r\n    let {searchTotalData = []} = this.props;\r\n    if (searchTotalData.length) {\r\n      let queryStringObj = {\r\n        type: TITLE,\r\n        num: page,\r\n        pageNum,\r\n        wd\r\n      }\r\n      getSearchPageList(dispatch, getBlogUrl(queryStringObj))\r\n    }\r\n  }\r\n\r\n  itemRender(current, type, originalElement) {\r\n    if (type === 'prev') {\r\n      return <a>Previous</a>;\r\n    } else if (type === 'next') {\r\n      return <a>Next</a>;\r\n    }\r\n    return (\r\n      <Link as={`/Blog/${current}`} href={`/Blog?id=${current}`}>\r\n        <a>{current}</a>\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    let total;\r\n    let {pageBlogData = [], totalPageData = [], searchData = [], searchTotalData = []} = this.props;\r\n    //如果用户进行搜索，就用搜索的数据，这里为了用户体验，并没有服务端渲染\r\n    if (searchData.length) {\r\n      pageBlogData = searchData\r\n    }\r\n    if (searchTotalData.length) {\r\n      ({total} = searchTotalData[0] || {})\r\n    } else {\r\n      ({total} = totalPageData[0] || {})\r\n    }\r\n    return (\r\n      <div className=\"Blog\">\r\n        <Head>\r\n          <title>{INDEX_TITLE}{COMMON_TITLE}</title>\r\n        </Head>\r\n        <Header/>\r\n        <Layout>\r\n          <Content style={{padding: '0 50px'}}>\r\n            <Search placeholder=\"input search text\" onSearch={this.onSearch.bind(this)} enterButton=\"Search\"\r\n                    size=\"large\"/>\r\n            <div style={{background: '#fff', padding: 24, minHeight: 380}}>\r\n              <ListTitle listData={pageBlogData}/>\r\n\r\n              <Pagination total={total} itemRender={this.itemRender.bind(this)} onChange={this.onChange.bind(this)}/>\r\n            </div>\r\n          </Content>\r\n        </Layout>\r\n        <Footer/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nBlog.getInitialProps = async function (context) {\r\n  const {id = 1} = context.query\r\n  console.log(context.query)\r\n  let queryStringObj = {\r\n    type: ALL,\r\n    num: id,\r\n    pageNum\r\n  }\r\n  let queryTotalString = {type: ALL};\r\n  const pageBlog = await fetch(getBlogUrl(queryStringObj))\r\n  const totalPage = await fetch(getTotalUrl(queryTotalString))\r\n  const pageBlogData = await pageBlog.json()\r\n  const totalPageData = await totalPage.json()\r\n\r\n\r\n  return {pageBlogData, totalPageData}\r\n}\r\n//这里根据需要传入redux\r\nconst mapStateToProps = state => {\r\n  console.log(state)\r\n  const {res, searchData, searchTotalData} = state\r\n  return {res, searchData, searchTotalData};\r\n}\r\nexport default connect(mapStateToProps)(Blog)\r\n\n\n\n// WEBPACK FOOTER //\n// pages/Blog/index.js","\r\nlet format = require('date-format');\r\nexport const updateHtml=str=>{\r\n    return str.replace(/'|\"|:|\\.|\\[|\\]|\\\\/g,function(str){\r\n\r\n        if(str==='\"'){\r\n            return '@quot;'\r\n        }else if(str===\"'\") {\r\n            return '@apos;'\r\n        }else if(str===':') {\r\n            return  '&#58;'\r\n        }else if(str==='[') {\r\n            return  '&#91;'\r\n        }else if(str==='[') {\r\n            return  '&#93;'\r\n        }else if(str==='\\\\') {//自定义的 找不到\r\n            return  '&#43;'\r\n        }else {\r\n            return '&#183;'\r\n        }\r\n    });\r\n}\r\nexport const spaceAdd = str=>str&&str.replace(/\\+/g,'&nbsp;')\r\nexport const getPathName = props=>props.location&&props.location.pathname&&props.location.pathname.substring(1);\r\nexport const NbspToSpace = str=>str&&str.replace(/&nbsp;/g,'　')\r\nexport const formatTime = time=>{\r\n    let zh = [\"日\",\"一\",\"二\",\"三\",\"四\",\"五\",\"六\"];\r\n    let date = new Date(time*1000);\r\n    return format.asString('yyyy-MM-dd hh:mm', date)+' 星期'+zh[date.getDay()]\r\n}\r\nexport const getArticleInfo = detailArr=>{\r\n    let {...rest}=detailArr&&detailArr[0]?detailArr[0]:{};\r\n    /*{\r\n        content,\r\n            createTime,\r\n            id,\r\n            img,\r\n            lastModify,\r\n            like,\r\n            modifyCount,\r\n            recommend,\r\n            short,\r\n            title,\r\n            type,\r\n            url,\r\n            user,\r\n            visitor,\r\n            week\r\n    }*/\r\n    return rest\r\n}\r\nexport const OldTime = 1526625828;  // 2018-05-18 14:43 星期五\r\nexport const getHtml=(str,newTime)=>{\r\n    if(OldTime>newTime){ //这是曾经的文章\r\n        return str? str\r\n            :null\r\n    }else {\r\n        return str? str.replace(/@quot;|@apos;/g,function(str){\r\n                if(str==='@quot;'){\r\n                    return '\"'\r\n                }else if(str===\"@apos;\") {\r\n                    return \"'\"\r\n                }\r\n            })\r\n            :null\r\n    }\r\n}\r\nexport function toQueryStr(obj) {\r\n  return \"?\" + JSON.stringify(obj).replace(/{|}|\\\"|\\'/g, \"\").replace(/,/g, \"&\").replace(/:/g, \"=\");\r\n}\n\n\n// WEBPACK FOOTER //\n// until/index.js"],"mappings":";;;;;;;;;;;;;;;;AAAA;AAGA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AACA;AAKA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;;;;;;;;ACpBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;;;;;;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbA;AACA;AAOA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAFA;AAMA;AACA;;;AACA;AAAA;AAEA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AAAA;AAGA;AACA;AADA;AAHA;AAAA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;;;AAEA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AAzGA;AACA;AA2GA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAAA;AAAA;AARA;AAAA;AACA;AADA;AASA;AATA;AAAA;AACA;AADA;AAUA;AAVA;AAAA;AACA;AADA;AAWA;AAXA;AAAA;AACA;AADA;AAYA;AAZA;AAeA;AAAA;AAAA;AACA;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAgBA;AACA;AADA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzJA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;;;;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}