{"version":3,"file":"9.3f02ef6c7a584382e5b3.hot-update.js","sources":["webpack:///components/Edit/index.js","webpack:///./node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js"],"sourcesContent":["import React, {Component} from 'react';\nimport {connect} from 'react-redux';\n\nimport {Row, Col} from 'antd';\n\nimport marked from 'marked'\nimport hljs from 'highlight.js';\n\nimport './test.less';\n\nhljs.configure({\n  tabReplace: '  ',\n  classPrefix: 'hljs-',\n  languages: ['CSS', 'HTML, XML', 'JavaScript', 'PHP', 'Python', 'Stylus', 'TypeScript', 'Markdown']\n})\nmarked.setOptions({\n  highlight: (code) => hljs.highlightAuto(code).value,\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  sanitize: true,\n  smartLists: true,\n  smartypants: false\n});\n\nclass Edit extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      previewContent: '',\n      aceBoxH: null\n\n    }\n\n    this.cacheValue()\n    this.containerScroll = this.containerScroll.bind(this)\n    this.onContentChange = this.onContentChange.bind(this)\n  }\n\n  componentWillMount() {\n    const {editCont=''} = this.props;\n\n    this.setState({\n      previewContent:marked(decodeURIComponent(editCont))\n    })\n  }\n  componentDidMount() {\n    this.setState({\n      aceBoxH: document.documentElement.clientHeight - document.querySelector('.editor-main-a').offsetHeight + 'px'\n    })\n  }\n\n  cacheValue() {\n    this.currentTabIndex = 1\n    this.hasContentChanged = false\n    this.scale = 1\n  }\n\n  setCurrentIndex(index) {\n    this.currentTabIndex = index\n  }\n\n  containerScroll(e) {\n    this.hasContentChanged && this.setScrollValue()\n    if (this.currentTabIndex === 1) {\n      this.previewContainer.scrollTop = this.editContainer.scrollTop * this.scale\n    } else {\n      this.editContainer.scrollTop = this.previewContainer.scrollTop / this.scale\n    }\n  }\n\n  onContentChange(e) {\n    let innerText=e.target.innerText\n    let markCont=marked(innerText)\n    const {handleChangeMarkEdit} = this.props;\n    handleChangeMarkEdit(innerText)\n    this.setState({\n      previewContent: markCont\n    })\n    !this.hasContentChanged && (this.hasContentChanged = true)\n  }\n\n  setScrollValue() {\n    // 设置值，方便 scrollBy 操作\n    this.scale = (this.previewWrap.offsetHeight - this.previewContainer.offsetHeight) / (this.editWrap.offsetHeight - this.editContainer.offsetHeight)\n    this.hasContentChanged = false\n  }\n\n  render() {\n\n    let {aceBoxH,previewContent} = this.state;\n    return (\n      <div>\n        <div className=\"editor-main-a\" style={{height: aceBoxH}}\n             key='main'>\n          <Row>\n            <Col span={12}>\n              <div style={{height: aceBoxH}}>\n                <div className=\"  content-edit\" onMouseOver={this.setCurrentIndex.bind(this, 1)}\n                     onScroll={this.containerScroll} ref={node => this.editContainer = node}>\n                  <div contentEditable=\"plaintext-only\"\n                       className=\"common-wrapper \" onInput={this.onContentChange}\n                       ref={node => this.editWrap = node}>123</div>\n                </div>\n              </div>\n            </Col>\n            <Col span={12}>\n              <div>\n                <div className=\"  content-edit\" ref={node => this.previewContainer = node}\n                     onMouseOver={this.setCurrentIndex.bind(this, 2)} onScroll={this.containerScroll}>\n                  <div className=\" common-wrapper\" ref={node => this.previewWrap = node}\n                       dangerouslySetInnerHTML={{__html: previewContent}}></div>\n                </div>\n              </div>\n            </Col>\n          </Row>\n\n        </div>\n        <style jsx>{`\n        .content-edit{\n          max-height:600px;\n          height:600px;\n          overflow-y:scroll;\n          border: 1px solid #ddd;\n          border-top:none;\n        }\n.editor-main-a  .common-wrapper {\n  padding: 20px;\n  min-height: 100%;\n  outline: none;\n}\n\n\n        `}</style>\n      </div>\n\n    );\n  }\n\n}\n\nexport default connect()(Edit);\n\n\n// WEBPACK FOOTER //\n// components/Edit/index.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js\n// module id = ./node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js\n// module chunks = 4 9"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAIA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AACA;AAUA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AAFA;AACA;AAKA;AACA;AAAA;AACA;AAVA;AAWA;AACA;;;AACA;AAAA;AAAA;AAGA;AACA;AADA;AAGA;;;AACA;AACA;AACA;AADA;AAGA;;;AAEA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AAFA;AAIA;AACA;AACA;AADA;AAGA;AACA;;;AAEA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AADA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAlBA;AAAA;AAAA;AA6CA;;;;AAhHA;AACA;AAmHA;;;;;;;AC9IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}